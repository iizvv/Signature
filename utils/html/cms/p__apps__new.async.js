(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{2:function(e,t){},3:function(e,t){},A5co:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"c",function(){return l}),a.d(t,"l",function(){return s}),a.d(t,"g",function(){return c}),a.d(t,"f",function(){return d}),a.d(t,"e",function(){return u}),a.d(t,"h",function(){return p}),a.d(t,"j",function(){return g}),a.d(t,"k",function(){return m}),a.d(t,"b",function(){return f}),a.d(t,"d",function(){return h}),a.d(t,"i",function(){return k});var n=a("p0pE"),r=a.n(n),o=a("t3Un");function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object(o["a"])({url:"package/getAllPackage",method:"GET",params:{userId:e}})}function l(e){return Object(o["a"])({url:"package/getPackageById",method:"GET",params:{id:e}})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e.loaded/e.total)};return Object(o["a"])({url:"package/insertPackage",method:"POST",headers:{"Content-Type":"multipart/form-data"},data:e,timeout:36e5,onUploadProgress:t})}function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{console.log(e.loaded/e.total)};return Object(o["a"])({url:"package/updatePackageById",method:"POST",headers:{"Content-Type":"multipart/form-data"},params:{id:e},data:t,timeout:36e5,onUploadProgress:a})}function d(e,t){return Object(o["a"])({url:"package/updatePackageTotalDeviceById",method:"POST",data:{id:e,count:t}})}function u(e){return Object(o["a"])({url:"package/deletePackageById",method:"POST",data:{id:e}})}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o["a"])({url:"package/updatePackageInfoById",method:"POST",data:r()({id:e},t)})}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o["a"])({url:"package/updateMobileconfig",method:"POST",data:r()({id:e},t)})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(o["a"])({url:"package/updatePackageImgsById",method:"POST",data:{id:e,imgs:t.join(",")}})}function f(e){return Object(o["a"])({url:"package/getAllUnusedKeysById",method:"GET",params:{id:e}})}function h(e,t,a){return Object(o["a"])({url:"package/insertPackageKeysById",method:"POST",params:{id:e,count:t,bit:a}})}function k(e,t){return Object(o["a"])({url:"package/updatePackageStateById",method:"POST",params:{id:e,state:t}})}},vsGu:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return P});a("IzEo");var n=a("bx4M"),r=(a("MXD1"),a("CFYs")),o=(a("+L6B"),a("2/Rp")),i=(a("Telt"),a("Tckk")),l=(a("DZo9"),a("8z0m")),s=a("jehZ"),c=a.n(s),d=(a("Pwec"),a("CtXQ")),u=(a("miYZ"),a("tsqr")),p=(a("/xke"),a("TeRw")),g=a("q1tI"),m=a.n(g),f=a("A5co"),h=a("3a4m"),k=a.n(h),v=a("FcY/"),y=a.n(v);class P extends m.a.Component{constructor(){super(),this.handleUpload=(()=>{var e=this.state.fileList,t=new FormData;t.append("file",e[0]),this.setState({uploading:!0}),this.setState({uploadProgress:0}),Object(f["l"])(t,e=>{var t=e.loaded/e.total*100|0;this.setState({uploadProgress:t}),console.log(t)}).then(e=>{var t=e.data;console.log(t),this.setState({fileList:[],uploading:!1}),p["a"].success({message:"\u4e0a\u4f20\u6210\u529f",duration:null});var a=t.data;k.a.push({pathname:"/apps/detail",query:{id:a}})}).catch(e=>{console.log(e),this.setState({uploading:!1,uploadProgress:0}),p["a"].error({message:"\u4e0a\u4f20\u5931\u8d25",duration:null})})}),this.state={fileList:[],uploading:!1,uploadProgress:0,appDisplayName:"",icon:""}}render(){var e=this.state,t=e.uploading,a=e.fileList,s=e.appDisplayName,p=e.icon,g={onRemove:e=>{this.setState(t=>{var a=t.fileList.indexOf(e),n=t.fileList.slice();return n.splice(a,1),{fileList:n}})},beforeUpload:e=>{var t=e.name.endsWith(".ipa");if(!t)return u["a"].error("\u8bf7\u9009\u62e9 ipa \u6587\u4ef6!"),this.setState(e=>({fileList:[]})),!1;console.log(e);var a=new y.a(e);return a.parse().then(t=>{console.log("app info ----\x3e ",t),this.setState(a=>({fileList:[e],appDisplayName:"".concat(t.CFBundleDisplayName||t.CFBundleName,"(").concat(t.CFBundleShortVersionString,")"),icon:t.icon}))}).catch(e=>{u["a"].error(e),console.log("err ----\x3e ",e)}),!1},fileList:a};return m.a.createElement("div",null,m.a.createElement(n["a"],{bordered:!1},m.a.createElement("h3",null,"\u4e0a\u4f20\u6587\u4ef6:"),m.a.createElement(l["a"].Dragger,c()({},g,{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"}}),m.a.createElement("p",{className:"ant-upload-drag-icon"},m.a.createElement(d["a"],{type:"upload"})),m.a.createElement("p",null,"\u70b9\u51fb\u6216\u62d6\u62fd\u9009\u62e9 ipa \u6587\u4ef6")),a.length>0&&m.a.createElement("div",{style:{display:"flex",alignItems:"center",marginTop:"10px"}},m.a.createElement(i["a"],{shape:"square",size:50,icon:"question",src:p}),m.a.createElement("div",{style:{marginLeft:"10px"}},s)),m.a.createElement(o["a"],{type:"primary",onClick:this.handleUpload,disabled:0===a.length,loading:t,style:{marginTop:16},block:!0,size:"large"},t?"\u4e0a\u4f20\u4e2d...":"\u4e0a\u4f20"),this.state.uploadProgress>0&&m.a.createElement(r["a"],{percent:this.state.uploadProgress,status:"active"})))}}}}]);