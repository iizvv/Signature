(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"8GfK":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"d",function(){return l}),a.d(t,"e",function(){return o}),a.d(t,"a",function(){return c});var n=a("t3Un");function s(){return Object(n["a"])({url:"apple/getAllAppleAccounts",method:"GET",data:{}})}function r(e){var t=e.account,a=e.csr,s=e.iss,r=e.kid,l=e.p8;return Object(n["a"])({url:"apple/insertAppleAccount",method:"POST",data:{account:t,csr:a,iss:s,kid:r,p8:l},timeout:36e5})}function l(e){return Object(n["a"])({url:"apple/deleteById",method:"POST",data:{id:e}})}function o(e,t){return Object(n["a"])({url:"apple/uploadP12",method:"POST",params:{id:t},headers:{"Content-Type":"multipart/form-data"},data:e,timeout:36e5})}function c(e){return Object(n["a"])({url:"device/getAllByAppleId",method:"GET",params:{id:e}})}},FbMV:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return y});a("DZo9");var n=a("8z0m"),s=(a("Pwec"),a("CtXQ")),r=(a("miYZ"),a("tsqr")),l=(a("/xke"),a("TeRw")),o=a("jehZ"),c=a.n(o),i=(a("y8nQ"),a("Vl3Y")),u=(a("5NDa"),a("5rEg")),p=(a("IzEo"),a("bx4M")),m=(a("J+/v"),a("MoRW")),d=(a("+L6B"),a("2/Rp")),h=(a("FJo9"),a("L41K")),g=a("q1tI"),f=a.n(g),E=a("8GfK"),b=a("3a4m"),v=a.n(b),S=a("7tlc"),I=h["a"].Step;class y extends f.a.Component{constructor(){super(),this.state={account:0,current:0,loading:!1}}componentDidMount(){var e=this.props.location.query;Object(S["isNullOrUndefined"])(e.id)||this.setState({account:e.id,current:1})}next(){var e=this.state.current+1;this.setState({current:e}),console.log(this.state)}render(){var e=this.state.current;return f.a.createElement("div",null,f.a.createElement(p["a"],{bordered:!1,title:f.a.createElement(h["a"],{current:e},f.a.createElement(I,{title:"\u586b\u5199\u5f00\u53d1\u8005\u8d26\u53f7\u4fe1\u606f"}),f.a.createElement(I,{title:"\u4e0a\u4f20\u8bc1\u4e66\u6587\u4ef6"}),f.a.createElement(I,{title:"\u5b8c\u6210"}))},0===e&&f.a.createElement(w,{onSubmit:e=>{console.log(e),this.setState({account:e.data}),this.next()}}),1===e&&f.a.createElement(f.a.Fragment,null,this.state.account>0?f.a.createElement(O,{account:this.state.account,onSubmit:e=>{console.log(e),this.next()}}):f.a.createElement("div",null,"\u83b7\u53d6\u8d26\u53f7\u4fe1\u606f\u5931\u8d25")),2===e&&f.a.createElement(m["a"],{status:"success",title:"\u6dfb\u52a0\u8d26\u53f7\u6210\u529f",extra:f.a.createElement(d["a"],{block:!0,type:"primary",onClick:e=>v.a.push({pathname:"/account"})},"\u8fd4\u56de\u5217\u8868")})))}}class x extends f.a.Component{constructor(){super(),this.state={loading:!1}}render(){var e=this.props.onSubmit,t=void 0===e?e=>{console.log(e)}:e,a=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:18}}},s={wrapperCol:{xs:{span:24,offset:0},sm:{span:18,offset:4}}};return f.a.createElement(i["a"],c()({},n,{labelAlign:"right",onSubmit:e=>{e.preventDefault(),console.log(e),this.props.form.validateFields((e,a)=>{console.log(e,a),e||(this.setState({loading:!0}),Object(E["c"])(a).then(e=>{var a=e.data;this.setState({loading:!1}),t(a)}).catch(e=>{this.setState({loading:!1}),console.log(e)}))})}}),f.a.createElement(i["a"].Item,{label:"\u5f00\u53d1\u8005\u8d26\u53f7"},a("account",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u5f00\u53d1\u8005\u8d26\u53f7"}]})(f.a.createElement(u["a"],null))),f.a.createElement(i["a"].Item,{label:"csr"},a("csr",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u94a5\u5319\u4e32\u5bfc\u51fa\u7684 certSigningRequest \u6587\u4ef6\u5185\u5bb9"}]})(f.a.createElement(u["a"],null))),f.a.createElement(i["a"].Item,{label:"Issuer ID"},a("iss",{rules:[{required:!0,message:"\u8bf7\u586b\u5199 https://appstoreconnect.apple.com/access/api \u4e2d\u7684 Issuer ID"}]})(f.a.createElement(u["a"],null))),f.a.createElement(i["a"].Item,{label:"\u5bc6\u94a5 ID"},a("kid",{rules:[{required:!0,message:"\u8bf7\u586b\u5199 https://appstoreconnect.apple.com/access/api \u4e2d\u7684 \u5bc6\u94a5 ID"}]})(f.a.createElement(u["a"],null))),f.a.createElement(i["a"].Item,{label:"p8"},a("p8",{rules:[{required:!0,message:"\u8bf7\u586b\u5199 https://appstoreconnect.apple.com/access/api \u4e2d\u7684 \u4e0b\u8f7d API \u5bc6\u94a5"}]})(f.a.createElement(u["a"],null))),f.a.createElement(i["a"].Item,s,f.a.createElement(d["a"],{type:"primary",htmlType:"submit",loading:this.state.loading},this.state.loading?"\u52a0\u8f7d\u4e2d...":"\u4e0b\u4e00\u6b65")))}}var w=i["a"].create({name:"InfoViewForm"})(x);class O extends f.a.Component{constructor(){super(),this.upload=(e=>{var t=this.props,a=t.account,n=void 0===a?0:a,s=t.onSubmit,r=void 0===s?e=>{console.log(e)}:s,o=this.state.fileList,c=new FormData;c.append("file",o[0]),this.setState({uploading:!0}),Object(E["e"])(c,n).then(e=>{var t=e.data;console.log(t),this.setState({fileList:[],uploading:!1}),l["a"].success({message:"\u4e0a\u4f20\u6210\u529f",duration:null});var a=t.data;r(a)}).catch(e=>{console.log(e),this.setState({uploading:!1}),l["a"].error({message:"\u4e0a\u4f20\u5931\u8d25",duration:null})})}),this.state={fileList:[],uploading:!1}}render(){return f.a.createElement("div",null,f.a.createElement("h3",null,"\u4e0a\u4f20\u6587\u4ef6:"),f.a.createElement(n["a"].Dragger,{style:{display:"flex",width:"100%",justifyContent:"center",alignItems:"center"},onRemove:e=>{this.setState(t=>{var a=t.fileList.indexOf(e),n=t.fileList.slice();return n.splice(a,1),{fileList:n}})},beforeUpload:e=>{var t=e.name.endsWith(".p12");return t?(this.setState(t=>({fileList:[e]})),!1):(r["a"].error("\u8bf7\u9009\u62e9 p12 \u6587\u4ef6!"),this.setState(e=>({fileList:[]})),!1)},fileList:this.state.fileList},f.a.createElement("p",{className:"ant-upload-drag-icon"},f.a.createElement(s["a"],{type:"upload"})),f.a.createElement("p",null,"\u70b9\u51fb\u6216\u62d6\u62fd\u9009\u62e9 p12 \u6587\u4ef6")),f.a.createElement(d["a"],{type:"primary",onClick:this.upload,style:{marginTop:"30px"},block:!0},"\u4e0a\u4f20"))}}}}]);